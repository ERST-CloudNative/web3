## 将智能合约部署到通道

最终用户通过调用智能合约与区块链账本进行交互。在 Hyperledger Fabric 中，智能合约部署在称为链代码的包中。想要验证交易或查询账本的组织需要在其同行上安装链码。在加入通道的节点上安装链码后，通道成员可以将链码部署到通道并使用链码中的智能合约在通道分类账上创建或更新资产。


### 启动网络

该命令创建一个以两个通道成员 Org1 和 Org2createChannel命名的通道。

```
[root@hy test-network]# ./network.sh up createChannel

Channel 'mychannel' created
Joining org1 peer to the channel...


Joining org2 peer to the channel...
...
Channel 'mychannel' joined
```



```
[root@hy test-network]# ls
addOrg3     CHAINCODE_AS_A_SERVICE_TUTORIAL.md  compose   log.txt           network.config  organizations       README.md  setOrgEnv.sh
bft-config  channel-artifacts                   configtx  monitordocker.sh  network.sh      prometheus-grafana  scripts    system-genesis-block
[root@hy test-network]# ./monitordocker.sh fabric_test
...
...
peer0.org2.example.com|2023-10-25 07:55:02.307 UTC 005f INFO [gossip.privdata] StoreBlock -> Received block [5] from buffer channel=mychannel
peer0.org1.example.com|2023-10-25 07:55:02.307 UTC 0065 INFO [gossip.privdata] StoreBlock -> Received block [5] from buffer channel=mychannel
peer0.org1.example.com|2023-10-25 07:55:02.308 UTC 0066 INFO [committer.txvalidator] Validate -> [mychannel] Validated block [5] in 0ms
peer0.org2.example.com|2023-10-25 07:55:02.308 UTC 0060 INFO [committer.txvalidator] Validate -> [mychannel] Validated block [5] in 1ms
peer0.org1.example.com|2023-10-25 07:55:02.308 UTC 0067 INFO [lifecycle] update -> Updating cached definition for chaincode 'basic' on channel 'mychannel'
...
```


```

[root@hy fabric-samples]# cd -
/root/go/src/github.com/b43646/fabric-samples/test-network
[root@hy test-network]# cd ../asset-transfer-basic/chaincode-
chaincode-external/   chaincode-go/         chaincode-java/       chaincode-javascript/ chaincode-typescript/
[root@hy test-network]# cd ../asset-transfer-basic/chaincode-go/
[root@hy chaincode-go]# ls
assetTransfer.go  chaincode  go.mod  go.sum  vendor
[root@hy chaincode-go]# vi chaincode/
mocks/                 smartcontract.go       smartcontract_test.go
[root@hy chaincode-go]# vi chaincode/smartcontract.go
[root@hy chaincode-go]# vi go.mod
[root@hy chaincode-go]# ls
assetTransfer.go  chaincode  go.mod  go.sum  vendor
[root@hy chaincode-go]# vi assetTransfer.go
[root@hy chaincode-go]# vi go.mod
[root@hy chaincode-go]# ls
assetTransfer.go  chaincode  go.mod  go.sum  vendor
[root@hy chaincode-go]# ls vendor/
github.com  golang.org  google.golang.org  gopkg.in  modules.txt
[root@hy chaincode-go]# GO111MODULE=on go mod vendor
[root@hy chaincode-go]# cd ../../test-network
[root@hy test-network]# export PATH=${PWD}/../bin:$PATH
[root@hy test-network]# export FABRIC_CFG_PATH=$PWD/../config/
[root@hy test-network]# peer version
peer:
 Version: v2.5.0
 Commit SHA: bd8e248
 Go version: go1.20.2
 OS/Arch: linux/amd64
 Chaincode:
  Base Docker Label: org.hyperledger.fabric
  Docker Namespace: hyperledger

[root@hy test-network]# peer lifecycle chaincode package basic.tar.gz --path ../asset-transfer-basic/chaincode-go/ --lang golang --label basic_1.0
[root@hy test-network]# ls
addOrg3       CHAINCODE_AS_A_SERVICE_TUTORIAL.md  configtx          network.config  prometheus-grafana  setOrgEnv.sh
basic.tar.gz  channel-artifacts                   log.txt           network.sh      README.md           system-genesis-block
bft-config    compose                             monitordocker.sh  organizations   scripts
[root@hy test-network]#
[root@hy test-network]# export CORE_PEER_TLS_ENABLED=true
[root@hy test-network]# export CORE_PEER_LOCALMSPID="Org1MSP"
[root@hy test-network]# export CORE_PEER_TLS_ROOTCERT_FILE=${PWD}/organizations/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt
[root@hy test-network]# export CORE_PEER_MSPCONFIGPATH=${PWD}/organizations/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp
[root@hy test-network]# export CORE_PEER_ADDRESS=localhost:7051
[root@hy test-network]#
[root@hy test-network]# peer lifecycle chaincode install basic.tar.gz
2023-10-25 07:38:37.158 GMT 0001 INFO [cli.lifecycle.chaincode] submitInstallProposal -> Installed remotely: response:<status:200 payload:"\nJbasic_1.0:e4de097efb5be42d96aebc4bde18eea848aad0f5453453ba2aad97f2e41e0d57\022\tbasic_1.0" >
2023-10-25 07:38:37.159 GMT 0002 INFO [cli.lifecycle.chaincode] submitInstallProposal -> Chaincode code package identifier: basic_1.0:e4de097efb5be42d96aebc4bde18eea848aad0f5453453ba2aad97f2e41e0d57
[root@hy test-network]#
[root@hy test-network]#
[root@hy test-network]# export CORE_PEER_LOCALMSPID="Org2MSP"
[root@hy test-network]# export CORE_PEER_TLS_ROOTCERT_FILE=${PWD}/organizations/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt
[root@hy test-network]# export CORE_PEER_MSPCONFIGPATH=${PWD}/organizations/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp
[root@hy test-network]# export CORE_PEER_ADDRESS=localhost:9051
[root@hy test-network]#
[root@hy test-network]# peer lifecycle chaincode install basic.tar.gz
2023-10-25 07:40:25.159 GMT 0001 INFO [cli.lifecycle.chaincode] submitInstallProposal -> Installed remotely: response:<status:200 payload:"\nJbasic_1.0:e4de097efb5be42d96aebc4bde18eea848aad0f5453453ba2aad97f2e41e0d57\022\tbasic_1.0" >
2023-10-25 07:40:25.159 GMT 0002 INFO [cli.lifecycle.chaincode] submitInstallProposal -> Chaincode code package identifier: basic_1.0:e4de097efb5be42d96aebc4bde18eea848aad0f5453453ba2aad97f2e41e0d57
[root@hy test-network]#
[root@hy test-network]# peer lifecycle chaincode queryinstalled
Installed chaincodes on peer:
Package ID: basic_1.0:e4de097efb5be42d96aebc4bde18eea848aad0f5453453ba2aad97f2e41e0d57, Label: basic_1.0
[root@hy test-network]# export CC_PACKAGE_ID=basic_1.0:e4de097efb5be42d96aebc4bde18eea848aad0f5453453ba2aad97f2e41e0d57
[root@hy test-network]#
[root@hy test-network]# peer lifecycle chaincode approveformyorg -o localhost:7050 --ordererTLSHostnameOverride orderer.example.com --channelID mychannel --name basic --version 1.0 --package-id $CC_PACKAGE_ID --sequence 1 --tls --cafile "${PWD}/organizations/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem"
2023-10-25 07:43:19.927 GMT 0001 INFO [chaincodeCmd] ClientWait -> txid [6a61bcb6ca5b4dc967392fdfcfb18bc9ae85c51f93f212c881505084c780e18f] committed with status (VALID) at localhost:9051
[root@hy test-network]# docker ps
CONTAINER ID   IMAGE                               COMMAND             CREATED          STATUS          PORTS                                                                                                                             NAMES
19019a893bb5   gliderlabs/logspout                 "/bin/logspout"     18 minutes ago   Up 18 minutes   127.0.0.1:8000->80/tcp                                                                                                            logspout
4cf6f79c55f8   hyperledger/fabric-tools:latest     "/bin/bash"         19 minutes ago   Up 19 minutes                                                                                                                                     cli
247511a659bf   hyperledger/fabric-peer:latest      "peer node start"   19 minutes ago   Up 19 minutes   0.0.0.0:7051->7051/tcp, :::7051->7051/tcp, 0.0.0.0:9444->9444/tcp, :::9444->9444/tcp                                              peer0.org1.example.com
7a6e147a79b2   hyperledger/fabric-orderer:latest   "orderer"           19 minutes ago   Up 19 minutes   0.0.0.0:7050->7050/tcp, :::7050->7050/tcp, 0.0.0.0:7053->7053/tcp, :::7053->7053/tcp, 0.0.0.0:9443->9443/tcp, :::9443->9443/tcp   orderer.example.com
16b02e0cd7aa   hyperledger/fabric-peer:latest      "peer node start"   19 minutes ago   Up 19 minutes   0.0.0.0:9051->9051/tcp, :::9051->9051/tcp, 7051/tcp, 0.0.0.0:9445->9445/tcp, :::9445->9445/tcp                                    peer0.org2.example.com
[root@hy test-network]#
[root@hy test-network]#
[root@hy test-network]#
[root@hy test-network]# export CORE_PEER_LOCALMSPID="Org1MSP"
export CORE_PEER_TLS_ROOTCERT_FILE=${PWD}/organizations/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt
export CORE_PEER_ADDRESS=localhost:7051[root@hy test-network]# export CORE_PEER_MSPCONFIGPATH=${PWD}/organizations/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp
[root@hy test-network]# export CORE_PEER_TLS_ROOTCERT_FILE=${PWD}/organizations/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt
[root@hy test-network]# export CORE_PEER_ADDRESS=localhost:7051
[root@hy test-network]#
[root@hy test-network]#
[root@hy test-network]# peer lifecycle chaincode approveformyorg -o localhost:7050 --ordererTLSHostnameOverride orderer.example.com --channelID mychannel --name basic --version 1.0 --package-id $CC_PACKAGE_ID --sequence 1 --tls --cafile "${PWD}/organizations/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem"
2023-10-25 07:47:34.622 GMT 0001 INFO [chaincodeCmd] ClientWait -> txid [de1ccb48130dedee42e4e927962c3133a55de549c4c3312a653458f9ed952c46] committed with status (VALID) at localhost:7051
[root@hy test-network]#
[root@hy test-network]# peer lifecycle chaincode checkcommitreadiness --channelID mychannel --name basic --version 1.0 --sequence 1 --tls --cafile "${PWD}/organizations/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem" --output json
{
        "approvals": {
                "Org1MSP": true,
                "Org2MSP": true
        }
}
[root@hy test-network]#
[root@hy test-network]# peer lifecycle chaincode commit -o localhost:7050 --ordererTLSHostnameOverride orderer.example.com --channelID mychannel --name basic --version 1.0 --sequence 1 --tls --cafile "${PWD}/organizations/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem" --peerAddresses localhost:7051 --tlsRootCertFiles "${PWD}/organizations/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt" --peerAddresses localhost:9051 --tlsRootCertFiles "${PWD}/organizations/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt"
2023-10-25 07:55:02.550 GMT 0001 INFO [chaincodeCmd] ClientWait -> txid [164791c730d8e5985e57f54b5c08bee55e63571517de2c4edb87762f947887d5] committed with status (VALID) at localhost:7051
2023-10-25 07:55:02.550 GMT 0002 INFO [chaincodeCmd] ClientWait -> txid [164791c730d8e5985e57f54b5c08bee55e63571517de2c4edb87762f947887d5] committed with status (VALID) at localhost:9051
[root@hy test-network]# peer lifecycle chaincode querycommitted --channelID mychannel --name basic
Committed chaincode definition for chaincode 'basic' on channel 'mychannel':
Version: 1.0, Sequence: 1, Endorsement Plugin: escc, Validation Plugin: vscc, Approvals: [Org1MSP: true, Org2MSP: true]
[root@hy test-network]#
[root@hy test-network]#
[root@hy test-network]# peer chaincode invoke -o localhost:7050 --ordererTLSHostnameOverride orderer.example.com --tls --cafile "${PWD}/organizations/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem" -C mychannel -n basic --peerAddresses localhost:7051 --tlsRootCertFiles "${PWD}/organizations/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt" --peerAddresses localhost:9051 --tlsRootCertFiles "${PWD}/organizations/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt" -c '{"function":"InitLedger","Args":[]}'
2023-10-25 07:58:41.596 GMT 0001 INFO [chaincodeCmd] chaincodeInvokeOrQuery -> Chaincode invoke successful. result: status:200
[root@hy test-network]#
[root@hy test-network]# peer chaincode query -C mychannel -n basic -c '{"Args":["GetAllAssets"]}'
[{"AppraisedValue":300,"Color":"blue","ID":"asset1","Owner":"Tomoko","Size":5},{"AppraisedValue":400,"Color":"red","ID":"asset2","Owner":"Brad","Size":5},{"AppraisedValue":500,"Color":"green","ID":"asset3","Owner":"Jin Soo","Size":10},{"AppraisedValue":600,"Color":"yellow","ID":"asset4","Owner":"Max","Size":10},{"AppraisedValue":700,"Color":"black","ID":"asset5","Owner":"Adriana","Size":15},{"AppraisedValue":800,"Color":"white","ID":"asset6","Owner":"Michel","Size":15}]
[root@hy test-network]# ls
addOrg3       CHAINCODE_AS_A_SERVICE_TUTORIAL.md  configtx          network.config  prometheus-grafana  setOrgEnv.sh
basic.tar.gz  channel-artifacts                   log.txt           network.sh      README.md           system-genesis-block
bft-config    compose                             monitordocker.sh  organizations   scripts
[root@hy test-network]# vi ../
asset-transfer-abac/              builders/                         .gitignore                        test-network-k8s/
asset-transfer-basic/             CHANGELOG.md                      hardware-security-module/         test-network-nano-bash/
asset-transfer-events/            ci/                               high-throughput/                  token-erc-1155/
asset-transfer-ledger-queries/    CODE_OF_CONDUCT.md                LICENSE                           token-erc-20/
asset-transfer-private-data/      CODEOWNERS                        MAINTAINERS.md                    token-erc-721/
asset-transfer-sbe/               config/                           off_chain_data/                   token-sdk/
asset-transfer-secured-agreement/ CONTRIBUTING.md                   README.md                         token-utxo/
auction-dutch/                    full-stack-asset-transfer-guide/  SECURITY.md
auction-simple/                   .git/                             test-application/
bin/                              .github/                          test-network/
[root@hy test-network]# vi ../asset-transfer-basic/
application-gateway-go/         application-javascript/         chaincode-java/                 rest-api-go/
application-gateway-java/       application-typescript/         chaincode-javascript/           rest-api-typescript/
application-gateway-typescript/ application-typescript-hsm/     chaincode-typescript/
application-go/                 chaincode-external/             .gitignore
application-java/               chaincode-go/                   README.md
[root@hy test-network]# vi ../asset-transfer-basic/chaincode-go/
assetTransfer.go  chaincode/        go.mod            go.sum            vendor/
[root@hy test-network]# vi ../asset-transfer-basic/chaincode-go/chaincode/
mocks/                 smartcontract.go       smartcontract_test.go
[root@hy test-network]# vi ../asset-transfer-basic/chaincode-go/chaincode/mocks/
chaincodestub.go       statequeryiterator.go  transaction.go
[root@hy test-network]# vi ../asset-transfer-basic/chaincode-go/chaincode/
mocks/                 smartcontract.go       smartcontract_test.go
[root@hy test-network]# vi ../asset-transfer-basic/chaincode-go/chaincode/smartcontract.go
[root@hy test-network]#
[root@hy test-network]#
[root@hy test-network]#
[root@hy test-network]#
[root@hy test-network]#
[root@hy test-network]#
[root@hy test-network]# cd ../asset-transfer-basic/chaincode-go/
[root@hy chaincode-go]# ls
assetTransfer.go  chaincode  go.mod  go.sum  vendor
[root@hy chaincode-go]# ls -al
total 132
drwxr-xr-x.  4 root root     89 Oct 25 07:35 .
drwxr-xr-x. 17 root root   4096 Oct 25 06:22 ..
-rw-r--r--.  1 root root    530 Oct 25 06:22 assetTransfer.go
drwxr-xr-x.  3 root root     72 Oct 25 08:02 chaincode
-rw-r--r--.  1 root root   1574 Oct 25 06:22 go.mod
-rw-r--r--.  1 root root 121771 Oct 25 06:22 go.sum
drwxr-xr-x.  6 root root    102 Oct 25 07:35 vendor
[root@hy chaincode-go]# ls chaincode/
mocks  smartcontract.go  smartcontract_test.go
[root@hy chaincode-go]# vi chaincode/smartcontract.go
[root@hy chaincode-go]#
[root@hy chaincode-go]#
[root@hy chaincode-go]# cd ../../test-network
[root@hy test-network]# export PATH=${PWD}/../bin:$PATH
[root@hy test-network]# export FABRIC_CFG_PATH=$PWD/../config/
[root@hy test-network]# export CORE_PEER_MSPCONFIGPATH=${PWD}/organizations/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp
[root@hy test-network]# peer lifecycle chaincode package basic_2.tar.gz --path ../asset-transfer-basic/chaincode-go/ --lang go --label basic_2.0        Error: failed to normalize chaincode path: unknown chaincodeType: GO
[root@hy test-network]# peer lifecycle chaincode package basic_2.tar.gz --path ../asset-transfer-basic/chaincode-go/ --lang golang --label basic_2.0
[root@hy test-network]# export CORE_PEER_TLS_ENABLED=true
[root@hy test-network]# export CORE_PEER_LOCALMSPID="Org1MSP"
[root@hy test-network]# export CORE_PEER_TLS_ROOTCERT_FILE=${PWD}/organizations/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt
[root@hy test-network]# export CORE_PEER_MSPCONFIGPATH=${PWD}/organizations/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp
[root@hy test-network]# export CORE_PEER_ADDRESS=localhost:7051
[root@hy test-network]# peer lifecycle chaincode install basic_2.tar.gz
2023-10-25 08:13:07.160 GMT 0001 INFO [cli.lifecycle.chaincode] submitInstallProposal -> Installed remotely: response:<status:200 payload:"\nJbasic_2.0:237d6a62cc1e97fbb55223a048542e83c7f6b93aa459fff94176a16c4b034b6b\022\tbasic_2.0" >
2023-10-25 08:13:07.160 GMT 0002 INFO [cli.lifecycle.chaincode] submitInstallProposal -> Chaincode code package identifier: basic_2.0:237d6a62cc1e97fbb55223a048542e83c7f6b93aa459fff94176a16c4b034b6b
[root@hy test-network]# peer lifecycle chaincode queryinstalled
Installed chaincodes on peer:
Package ID: basic_1.0:e4de097efb5be42d96aebc4bde18eea848aad0f5453453ba2aad97f2e41e0d57, Label: basic_1.0
Package ID: basic_2.0:237d6a62cc1e97fbb55223a048542e83c7f6b93aa459fff94176a16c4b034b6b, Label: basic_2.0
[root@hy test-network]# export NEW_CC_PACKAGE_ID=basic_2.0:237d6a62cc1e97fbb55223a048542e83c7f6b93aa459fff94176a16c4b034b6b
[root@hy test-network]# peer lifecycle chaincode approveformyorg -o localhost:7050 --ordererTLSHostnameOverride orderer.example.com --channelID mychannel --name basic --version 2.0 --package-id $NEW_CC_PACKAGE_ID --sequence 2 --tls --cafile "${PWD}/organizations/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem"
2023-10-25 08:14:06.472 GMT 0001 INFO [chaincodeCmd] ClientWait -> txid [fa4ce9c67d41c5e7929a7c5e3c0675b2faf75e09eceece96bfc1fcc7600011f0] committed with status (VALID) at localhost:7051
[root@hy test-network]#
[root@hy test-network]#
[root@hy test-network]#
[root@hy test-network]# export CORE_PEER_LOCALMSPID="Org2MSP"
[root@hy test-network]# export CORE_PEER_TLS_ROOTCERT_FILE=${PWD}/organizations/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt
[root@hy test-network]# export CORE_PEER_MSPCONFIGPATH=${PWD}/organizations/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp
[root@hy test-network]# export CORE_PEER_ADDRESS=localhost:9051
[root@hy test-network]#
[root@hy test-network]# peer lifecycle chaincode install basic_2.tar.gz
2023-10-25 08:14:52.162 GMT 0001 INFO [cli.lifecycle.chaincode] submitInstallProposal -> Installed remotely: response:<status:200 payload:"\nJbasic_2.0:237d6a62cc1e97fbb55223a048542e83c7f6b93aa459fff94176a16c4b034b6b\022\tbasic_2.0" >
2023-10-25 08:14:52.162 GMT 0002 INFO [cli.lifecycle.chaincode] submitInstallProposal -> Chaincode code package identifier: basic_2.0:237d6a62cc1e97fbb55223a048542e83c7f6b93aa459fff94176a16c4b034b6b
[root@hy test-network]# peer lifecycle chaincode approveformyorg -o localhost:7050 --ordererTLSHostnameOverride orderer.example.com --channelID mychannel --name basic --version 2.0 --package-id $NEW_CC_PACKAGE_ID --sequence 2 --tls --cafile "${PWD}/organizations/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem"
2023-10-25 08:15:31.218 GMT 0001 INFO [chaincodeCmd] ClientWait -> txid [e02c4d07f7a6bb5d2836ae9c306c90f2904c8064445857a9329f8f0bc5a5d7a8] committed with status (VALID) at localhost:9051
[root@hy test-network]#
[root@hy test-network]#
[root@hy test-network]# peer lifecycle chaincode checkcommitreadiness --channelID mychannel --name basic --version 2.0 --sequence 2 --tls --cafile "${PWD}/organizations/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem" --output json
{
        "approvals": {
                "Org1MSP": true,
                "Org2MSP": true
        }
}
[root@hy test-network]# peer lifecycle chaincode commit -o localhost:7050 --ordererTLSHostnameOverride orderer.example.com --channelID mychannel --name basic --version 2.0 --sequence 2 --tls --cafile "${PWD}/organizations/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem" --peerAddresses localhost:7051 --tlsRootCertFiles "${PWD}/organizations/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt" --peerAddresses localhost:9051 --tlsRootCertFiles "${PWD}/organizations/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt"
2023-10-25 08:16:04.114 GMT 0001 INFO [chaincodeCmd] ClientWait -> txid [043e433ba90be6cd04f9e58c67249e7cd756ce65c34e76141e4156dce3994558] committed with status (VALID) at localhost:7051
2023-10-25 08:16:04.122 GMT 0002 INFO [chaincodeCmd] ClientWait -> txid [043e433ba90be6cd04f9e58c67249e7cd756ce65c34e76141e4156dce3994558] committed with status (VALID) at localhost:9051
[root@hy test-network]# docker ps
CONTAINER ID   IMAGE                                                                                                                                                                    COMMAND                  CREATED          STATUS          PORTS                                                                                                                             NAMES
b143c24f3070   dev-peer0.org1.example.com-basic_2.0-237d6a62cc1e97fbb55223a048542e83c7f6b93aa459fff94176a16c4b034b6b-1e7f98d0a3c24356f19157dcc93e1b3b2b738fed67252e84e4d7ec38be34e93a   "chaincode -peer.add…"   14 seconds ago   Up 12 seconds                                                                                                                                     dev-peer0.org1.example.com-basic_2.0-237d6a62cc1e97fbb55223a048542e83c7f6b93aa459fff94176a16c4b034b6b
b4b2f74dc364   dev-peer0.org2.example.com-basic_2.0-237d6a62cc1e97fbb55223a048542e83c7f6b93aa459fff94176a16c4b034b6b-e7296160138ee5a52caeae77ea4349a1b3d162ee0612242a68b7de2636583dff   "chaincode -peer.add…"   14 seconds ago   Up 12 seconds                                                                                                                                     dev-peer0.org2.example.com-basic_2.0-237d6a62cc1e97fbb55223a048542e83c7f6b93aa459fff94176a16c4b034b6b
19019a893bb5   gliderlabs/logspout                                                                                                                                                      "/bin/logspout"          51 minutes ago   Up 51 minutes   127.0.0.1:8000->80/tcp                                                                                                            logspout
4cf6f79c55f8   hyperledger/fabric-tools:latest                                                                                                                                          "/bin/bash"              52 minutes ago   Up 52 minutes                                                                                                                                     cli
247511a659bf   hyperledger/fabric-peer:latest                                                                                                                                           "peer node start"        52 minutes ago   Up 52 minutes   0.0.0.0:7051->7051/tcp, :::7051->7051/tcp, 0.0.0.0:9444->9444/tcp, :::9444->9444/tcp                                              peer0.org1.example.com
7a6e147a79b2   hyperledger/fabric-orderer:latest                                                                                                                                        "orderer"                52 minutes ago   Up 52 minutes   0.0.0.0:7050->7050/tcp, :::7050->7050/tcp, 0.0.0.0:7053->7053/tcp, :::7053->7053/tcp, 0.0.0.0:9443->9443/tcp, :::9443->9443/tcp   orderer.example.com
16b02e0cd7aa   hyperledger/fabric-peer:latest                                                                                                                                           "peer node start"        52 minutes ago   Up 52 minutes   0.0.0.0:9051->9051/tcp, :::9051->9051/tcp, 7051/tcp, 0.0.0.0:9445->9445/tcp, :::9445->9445/tcp                                    peer0.org2.example.com
[root@hy test-network]# docker ps
CONTAINER ID   IMAGE                                                                                                                                                                    COMMAND                  CREATED              STATUS              PORTS                                                                                                                             NAMES
b143c24f3070   dev-peer0.org1.example.com-basic_2.0-237d6a62cc1e97fbb55223a048542e83c7f6b93aa459fff94176a16c4b034b6b-1e7f98d0a3c24356f19157dcc93e1b3b2b738fed67252e84e4d7ec38be34e93a   "chaincode -peer.add…"   About a minute ago   Up About a minute                                                                                                                                     dev-peer0.org1.example.com-basic_2.0-237d6a62cc1e97fbb55223a048542e83c7f6b93aa459fff94176a16c4b034b6b
b4b2f74dc364   dev-peer0.org2.example.com-basic_2.0-237d6a62cc1e97fbb55223a048542e83c7f6b93aa459fff94176a16c4b034b6b-e7296160138ee5a52caeae77ea4349a1b3d162ee0612242a68b7de2636583dff   "chaincode -peer.add…"   About a minute ago   Up About a minute                                                                                                                                     dev-peer0.org2.example.com-basic_2.0-237d6a62cc1e97fbb55223a048542e83c7f6b93aa459fff94176a16c4b034b6b
19019a893bb5   gliderlabs/logspout                                                                                                                                                      "/bin/logspout"          52 minutes ago       Up 52 minutes       127.0.0.1:8000->80/tcp                                                                                                            logspout
4cf6f79c55f8   hyperledger/fabric-tools:latest                                                                                                                                          "/bin/bash"              53 minutes ago       Up 53 minutes                                                                                                                                         cli
247511a659bf   hyperledger/fabric-peer:latest                                                                                                                                           "peer node start"        53 minutes ago       Up 53 minutes       0.0.0.0:7051->7051/tcp, :::7051->7051/tcp, 0.0.0.0:9444->9444/tcp, :::9444->9444/tcp                                              peer0.org1.example.com
7a6e147a79b2   hyperledger/fabric-orderer:latest                                                                                                                                        "orderer"                53 minutes ago       Up 53 minutes       0.0.0.0:7050->7050/tcp, :::7050->7050/tcp, 0.0.0.0:7053->7053/tcp, :::7053->7053/tcp, 0.0.0.0:9443->9443/tcp, :::9443->9443/tcp   orderer.example.com
16b02e0cd7aa   hyperledger/fabric-peer:latest                                                                                                                                           "peer node start"        53 minutes ago       Up 53 minutes       0.0.0.0:9051->9051/tcp, :::9051->9051/tcp, 7051/tcp, 0.0.0.0:9445->9445/tcp, :::9445->9445/tcp                                    peer0.org2.example.com
[root@hy test-network]#
[root@hy test-network]#
[root@hy test-network]#
[root@hy test-network]# peer chaincode query -C mychannel -n basic -c '{"Args":["GetAllAssets"]}'
[{"AppraisedValue":300,"Color":"blue","ID":"asset1","Owner":"Tomoko","Size":5},{"AppraisedValue":400,"Color":"red","ID":"asset2","Owner":"Brad","Size":5},{"AppraisedValue":500,"Color":"green","ID":"asset3","Owner":"Jin Soo","Size":10},{"AppraisedValue":600,"Color":"yellow","ID":"asset4","Owner":"Max","Size":10},{"AppraisedValue":700,"Color":"black","ID":"asset5","Owner":"Adriana","Size":15},{"AppraisedValue":800,"Color":"white","ID":"asset6","Owner":"Michel","Size":15}]
[root@hy test-network]#
[root@hy test-network]#
[root@hy test-network]# peer chaincode invoke -o localhost:7050 --ordererTLSHostnameOverride orderer.example.com --tls --cafile "${PWD}/organizations/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem" -C mychannel -n basic --peerAddresses localhost:7051 --tlsRootCertFiles "${PWD}/organizations/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt" --peerAddresses localhost:9051 --tlsRootCertFiles "${PWD}/organizations/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt" -c '{"function":"InitLedger","Args":[]}'
2023-10-25 08:20:10.457 GMT 0001 INFO [chaincodeCmd] chaincodeInvokeOrQuery -> Chaincode invoke successful. result: status:200
[root@hy test-network]# peer chaincode query -C mychannel -n basic -c '{"Args":["GetAllAssets"]}'                                                       [{"AppraisedValue":300,"Color":"blue","ID":"asset1","Owner":"Tomoko","Size":5},{"AppraisedValue":400,"Color":"red","ID":"asset2","Owner":"Brad","Size":5},{"AppraisedValue":500,"Color":"green","ID":"asset3","Owner":"Jin Soo","Size":10},{"AppraisedValue":600,"Color":"yellow","ID":"asset4","Owner":"Max","Size":10},{"AppraisedValue":700,"Color":"black","ID":"asset5","Owner":"Adriana","Size":15},{"AppraisedValue":800,"Color":"white","ID":"asset6","Owner":"Michel","Size":15},{"AppraisedValue":900,"Color":"red","ID":"asset7","Owner":"Oracle","Size":20}]
[root@hy test-network]#
[root@hy test-network]#
[root@hy test-network]# peer chaincode invoke -o localhost:7050 --ordererTLSHostnameOverride orderer.example.com --tls --cafile "${PWD}/organizations/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem" -C mychannel -n basic --peerAddresses localhost:7051 --tlsRootCertFiles "${PWD}/organizations/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt" --peerAddresses localhost:9051 --tlsRootCertFiles "${PWD}/organizations/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt" -c '{"function":"CreateAsset","Args":["asset8","blue","16","Kelley","750"]}'
2023-10-25 08:20:58.745 GMT 0001 INFO [chaincodeCmd] chaincodeInvokeOrQuery -> Chaincode invoke successful. result: status:200
[root@hy test-network]#
[root@hy test-network]# peer chaincode query -C mychannel -n basic -c '{"Args":["GetAllAssets"]}'                                                       [{"AppraisedValue":300,"Color":"blue","ID":"asset1","Owner":"Tomoko","Size":5},{"AppraisedValue":400,"Color":"red","ID":"asset2","Owner":"Brad","Size":5},{"AppraisedValue":500,"Color":"green","ID":"asset3","Owner":"Jin Soo","Size":10},{"AppraisedValue":600,"Color":"yellow","ID":"asset4","Owner":"Max","Size":10},{"AppraisedValue":700,"Color":"black","ID":"asset5","Owner":"Adriana","Size":15},{"AppraisedValue":800,"Color":"white","ID":"asset6","Owner":"Michel","Size":15},{"AppraisedValue":900,"Color":"red","ID":"asset7","Owner":"Oracle","Size":20},{"AppraisedValue":750,"Color":"blue","ID":"asset8","Owner":"Kelley","Size":16}]
[root@hy test-network]# vi ../
asset-transfer-abac/              builders/                         .gitignore                        test-network-k8s/
asset-transfer-basic/             CHANGELOG.md                      hardware-security-module/         test-network-nano-bash/
asset-transfer-events/            ci/                               high-throughput/                  token-erc-1155/
asset-transfer-ledger-queries/    CODE_OF_CONDUCT.md                LICENSE                           token-erc-20/
asset-transfer-private-data/      CODEOWNERS                        MAINTAINERS.md                    token-erc-721/
asset-transfer-sbe/               config/                           off_chain_data/                   token-sdk/
asset-transfer-secured-agreement/ CONTRIBUTING.md                   README.md                         token-utxo/
auction-dutch/                    full-stack-asset-transfer-guide/  SECURITY.md
auction-simple/                   .git/                             test-application/
bin/                              .github/                          test-network/
[root@hy test-network]# vi ../asset-transfer-basic/
application-gateway-go/         application-javascript/         chaincode-java/                 rest-api-go/
application-gateway-java/       application-typescript/         chaincode-javascript/           rest-api-typescript/
application-gateway-typescript/ application-typescript-hsm/     chaincode-typescript/
application-go/                 chaincode-external/             .gitignore
application-java/               chaincode-go/                   README.md
[root@hy test-network]# vi ../asset-transfer-basic/chaincode-go/
assetTransfer.go  chaincode/        go.mod            go.sum            vendor/
[root@hy test-network]# vi ../asset-transfer-basic/chaincode-go/chaincode/
mocks/                 smartcontract.go       smartcontract_test.go
[root@hy test-network]# vi ../asset-transfer-basic/chaincode-go/chaincode/smartcontract.go

[root@hy test-network]# ./network.sh down
```
